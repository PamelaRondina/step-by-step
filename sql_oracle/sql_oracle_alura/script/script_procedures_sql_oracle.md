### Contém na Criação das Procedures
```sql
vIP_CLIENT in VARCHAR2, 
vLAST_USER in NUMBER)
```



### NÃO é criado na Procedure de INCLUIR
> São preenchidos automaticamente

```SQL
ID NUMBER NOT NULL,
FLG_ATIVO CHAR(1) DEFAULT ON NULL '1' NOT NULL,
CREATE_AT TIMESTAMP (6) NOT NULL,
UPDATE_AT TIMESTAMP (6) NOT NULL,
CREATE_BY NUMBER NOT NULL,
;
```
> UPDATE/DELETE possui ID
> UPDATE/DELETE possui FLG_ATIVO (NO FINAL)

### CRIAR PROCEDURE_INSERT/INCLUIR
> TABELA PAI

```sql
CREATE PROCEDURE PRC_CONTAS_PAGAR_INCLUIR (
vFK_TIPO_FAVORECIDO in NUMBER,
vFK_FORNECEDOR in NUMBER,
vFK_FUNCIONARIO in NUMBER,
vFK_PROFISSIONAL in NUMBER,
vNOTA_FISCAL in NUMBER,
vOBSERVACAO in VARCHAR,
vVALOR_TOTAL in NUMBER,
vDATA_VENCIMENTO in TIMESTAMP,
vTIPO_PAGAMENTO in CHAR,
vQTD_PARCELA in NUMBER,
vTIPO_INTERVALO in CHAR,
vQTD_INTERVALO in NUMBER,
vDATA_INTERVALO in TIMESTAMP,
vIP_CLIENT in VARCHAR2, 
vLAST_USER in NUMBER) 

IS
BEGIN
    INSERT INTO CONTAS_PAGAR
    (FK_TIPO_FAVORECIDO, FK_FORNECEDOR, FK_FUNCIONARIO, FK_PROFISSIONAL, NOTA_FISCAL, 
    OBSERVACAO, VALOR_TOTAL, DATA_VENCIMENTO, TIPO_PAGAMENTO, QTD_PARCELA, TIPO_INTERVALO,
    QTD_INTERVALO, DATA_INTERVALO, IP_CLIENT, LAST_USER)
    VALUES
    (vFK_TIPO_FAVORECIDO, vFK_FORNECEDOR, vFK_FUNCIONARIO, vFK_PROFISSIONAL, vNOTA_FISCAL, 
    vOBSERVACAO, vVALOR_TOTAL, vDATA_VENCIMENTO, vTIPO_PAGAMENTO, vQTD_PARCELA, vTIPO_INTERVALO,
    vQTD_INTERVALO, vDATA_INTERVALO, vIP_CLIENT, vLAST_USER);
    
END PRC_CONTAS_PAGAR_INCLUIR;
```

> TABELA FILHO_ITENS

```SQL
CREATE PROCEDURE PRC_CONTAS_PAGAR_ITENS_INCLUIR (vFK_CONTAS_PAGAR in NUMBER, vDESCRICAO in VARCHAR, 
vFK_CLASSIFICACAO_FINANCEIRA in NUMBER, vQUANTIDADE in NUMBER, vVALOR_UNITARIO in NUMBER, vVALOR_TOTAL in NUMBER,
vIP_CLIENT in VARCHAR2, vLAST_USER in NUMBER)

IS
BEGIN
    INSERT INTO CONTAS_PAGAR_ITENS
    (FK_CONTAS_PAGAR, DESCRICAO, FK_CLASSIFICACAO_FINANCEIRA, QUANTIDADE, VALOR_UNITARIO, VALOR_TOTAL, 
    IP_CLIENT, LAST_USER)
VALUES
    (vFK_CONTAS_PAGAR, vDESCRICAO, vFK_CLASSIFICACAO_FINANCEIRA, vQUANTIDADE, vVALOR_UNITARIO, 
    vVALOR_TOTAL, vIP_CLIENT, vLAST_USER);

END PRC_CONTAS_PAGAR_ITENS_INCLUIR;
```

>TABELA FILHO_PARCELAS

```sql
CREATE PROCEDURE PRC_CONTAS_PAGAR_PARCELAS_INCLUIR (vFK_CONTAS_PAGAR in NUMBER,vNR_PARCELA in NUMBER,
vDATA_VENCIMENTO in TIMESTAMP, vOBSERVACAO in VARCHAR, vVALOR in NUMBER, vVALOR_PAGO in NUMBER,
vDATA_PAGAMENTO  in TIMESTAMP, vSTATUS in CHAR, vFK_FORMA_PAGAMENTO in NUMBER, vIP_CLIENT in VARCHAR2,
vLAST_USER in NUMBER)

IS
BEGIN
    INSERT INTO CONTAS_PAGAR_PARCELAS(FK_CONTAS_PAGAR, NR_PARCELA, DATA_VENCIMENTO, OBSERVACAO, 
    VALOR, VALOR_PAGO, DATA_PAGAMENTO, STATUS, FK_FORMA_PAGAMENTO, IP_CLIENT, LAST_USER)
VALUES
    (vFK_CONTAS_PAGAR, vNR_PARCELA, vDATA_VENCIMENTO, vOBSERVACAO, 
    vVALOR, vVALOR_PAGO, vDATA_PAGAMENTO, vSTATUS, vFK_FORMA_PAGAMENTO, vIP_CLIENT, vLAST_USER);

END PRC_CONTAS_PAGAR_PARCELAS_INCLUIR;
```

> TABELA FILHO_HISTORICO

```SQL
CREATE PROCEDURE PRC_CONTAS_PAGAR_HISTORICO_INCLUIR (vFK_CONTAS_PAGAR in NUMBER, vHASH in VARCHAR2,
vDESCRICAO in VARCHAR2, vIP_CLIENT in VARCHAR2, vLAST_USER in NUMBER)

IS
BEGIN
    INSERT INTO CONTAS_PAGAR_HISTORICO (FK_CONTAS_PAGAR, HASH, DESCRICAO, IP_CLIENT, LAST_USER)
VALUES (vFK_CONTAS_PAGAR, vHASH, vDESCRICAO, vIP_CLIENT, vLAST_USER);

END PRC_CONTAS_PAGAR_HISTORICO_INCLUIR;
```

### CHAMADA PROCEDURE INSERT *************

```sql
CALL SP_PRODUTOS_INSERT ('1040107', 'Light - 350ml - Melância', 'Lata', '350 ml', 'Melância', 4.56);
CALL SP_VENDEDORES_INSERT ('00233', 'João Geraldo da Fonseca', 0.10);

CALL SP_CADASTRO_CLIENTES_INSERT ('1', '12345678998','João da Silva', 
'Rua projetada A número 10', 'Vila Roman', 'Caratinga', 'AM', 
'22222222', 30, 'M', 10000.00, 2000, 0, '1992-08-26');
```

### CRIAR PROCEDURE_UPDATE/ALTERAR

> UPDATE TABELA PAI

```SQL
CREATE PROCEDURE PRC_CONTAS_PAGAR_ALTERAR (vID in NUMBER, vFK_TIPO_FAVORECIDO in NUMBER, vFK_FORNECEDOR in NUMBER, 
vFK_FUNCIONARIO in NUMBER, vFK_PROFISSIONAL in NUMBER, vNOTA_FISCAL in NUMBER, vOBSERVACAO in VARCHAR, 
vVALOR_TOTAL in NUMBER, vDATA_VENCIMENTO in TIMESTAMP, vTIPO_PAGAMENTO in CHAR, vQTD_PARCELA in NUMBER,
vTIPO_INTERVALO in CHAR, vQTD_INTERVALO in NUMBER, vDATA_INTERVALO in TIMESTAMP, vIP_CLIENT in VARCHAR2, 
vLAST_USER in NUMBER)

IS
BEGIN
    UPDATE CONTAS_PAGAR SET
    FK_TIPO_FAVORECIDO = vFK_TIPO_FAVORECIDO,
    FK_FORNECEDOR = vFK_FORNECEDOR,
    FK_FUNCIONARIO = vFK_FUNCIONARIO,
    FK_PROFISSIONAL = vFK_PROFISSIONAL,
    NOTA_FISCAL = vNOTA_FISCAL, 
    OBSERVACAO = vOBSERVACAO,
    VALOR_TOTAL = vVALOR_TOTAL,
    DATA_VENCIMENTO = vDATA_VENCIMENTO,
    TIPO_PAGAMENTO = vTIPO_PAGAMENTO,
    QTD_PARCELA = vQTD_PARCELA,
    TIPO_INTERVALO = vTIPO_INTERVALO,
    QTD_INTERVALO = vQTD_INTERVALO,
    DATA_INTERVALO = vDATA_INTERVALO,
    IP_CLIENT = vIP_CLIENT, 
    LAST_USER = vLAST_USER
    
    WHERE ID = vID
    AND    FLG_ATIVO = 1;

END PRC_CONTAS_PAGAR_ALTERAR;
```

> UPDATE TABELA FILHO_ITENS

```sql
CREATE PROCEDURE PRC_CONTAS_PAGAR_ITENS_ALTERAR (vID in NUMBER, vFK_CONTAS_PAGAR in NUMBER, 
vDESCRICAO in VARCHAR, vFK_CLASSIFICACAO_FINANCEIRA in NUMBER, vQUANTIDADE in NUMBER, 
vVALOR_UNITARIO in NUMBER, vVALOR_TOTAL in NUMBER, vIP_CLIENT in VARCHAR2, vLAST_USER in NUMBER)

IS
BEGIN
    UPDATE CONTAS_PAGAR_ITENS SET
    FK_CONTAS_PAGAR = vFK_CONTAS_PAGAR,
    DESCRICAO = vDESCRICAO,
    FK_CLASSIFICACAO_FINANCEIRA = vFK_CLASSIFICACAO_FINANCEIRA,
    QUANTIDADE = vQUANTIDADE,
    VALOR_UNITARIO = vVALOR_UNITARIO,
    VALOR_TOTAL = vVALOR_TOTAL,
    IP_CLIENT = vIP_CLIENT, 
    LAST_USER = vLAST_USER
    
    WHERE ID = vID
    AND    FLG_ATIVO = 1;

END PRC_CONTAS_PAGAR_ITENS_ALTERAR;
```

> UPDATE TABELA FILHO_PARCELAS

```sql
CREATE PROCEDURE PRC_CONTAS_PAGAR_PARCELAS_ALTERAR (vID in NUMBER, vFK_CONTAS_PAGAR in NUMBER,
vNR_PARCELA in NUMBER, vDATA_VENCIMENTO in TIMESTAMP, vOBSERVACAO in VARCHAR, vVALOR in NUMBER, 
vVALOR_PAGO in NUMBER, vDATA_PAGAMENTO  in TIMESTAMP, vSTATUS in CHAR, 
vFK_FORMA_PAGAMENTO in NUMBER, vIP_CLIENT in VARCHAR2, vLAST_USER in NUMBER)

IS
BEGIN
    UPDATE CONTAS_PAGAR_PARCELAS SET
    FK_CONTAS_PAGAR = vFK_CONTAS_PAGAR,
    NR_PARCELA = vNR_PARCELA,
    DATA_VENCIMENTO = vDATA_VENCIMENTO,
    OBSERVACAO = vOBSERVACAO, 
    VALOR = vVALOR,
    VALOR_PAGO = vVALOR_PAGO,
    DATA_PAGAMENTO = vDATA_PAGAMENTO,
    STATUS = vSTATUS,
    FK_FORMA_PAGAMENTO = vFK_FORMA_PAGAMENTO,
    IP_CLIENT = vIP_CLIENT, 
    LAST_USER = vLAST_USER
    
    WHERE ID = vID
    AND    FLG_ATIVO = 1;

END PRC_CONTAS_PAGAR_PARCELAS_ALTERAR;
```

> UPDATE TABELA FILHO_HISTORICO

```sql
CREATE PROCEDURE PRC_CONTAS_PAGAR_HISTORICO_ALTERAR (vID in NUMBER, vFK_CONTAS_PAGAR in NUMBER,
vHASH in VARCHAR2, vDESCRICAO in VARCHAR2, vIP_CLIENT in VARCHAR2, vLAST_USER in NUMBER)

IS
BEGIN
    UPDATE CONTAS_PAGAR_HISTORICO SET
    FK_CONTAS_PAGAR = vFK_CONTAS_PAGAR,
    HASH = vHASH,
    DESCRICAO = vDESCRICAO,
    IP_CLIENT = vIP_CLIENT, 
    LAST_USER = vLAST_USER
    
    WHERE ID = vID
    AND    FLG_ATIVO = 1;

END PRC_CONTAS_PAGAR_HISTORICO_ALTERAR;
```

### CHAMADA PROCEDURE UPDATE *************

-- CHAMADA PROCEDURE_UPDATE
CALL SP_PRODUTOS_UPDATE (544931, 'Frescor do Verão - 350 ml - Limão', 'Lata', '350 ml', 'Limão', 2.46);

### CRIAR PROCEDURE_DELETE/EXCLUIR

```SQL
CREATE PROCEDURE PRC_CONTAS_PAGAR_EXCLUIR (vID in NUMBER, vIP_CLIENT in VARCHAR2, vUSUARIO_ID in NUMBER) 

IS
BEGIN
    UPDATE CONTAS_PAGAR SET
           FLG_ATIVO = 0,
           IP_CLIENT = vIP_CLIENT,
           LAST_USER = vUSUARIO_ID
    WHERE  ID = vID
    AND    FLG_ATIVO = 1;

END PRC_CONTAS_PAGAR_EXCLUIR;
```



CREATE PROCEDURE `SP_PRODUTOS_DELETE`(
	IN p_ID INT)
BEGIN
	DELETE FROM PRODUTOS
WHERE ID = p_ID;
    
END



-- CHAMADA PROCEDURE_DELETE
CALL SP_PRODUTOS_DELETE (1078680);
CALL SP_VENDEDORES_DELETE(00233);
CALL SP_CADASTRO_CLIENTES_SELECT_ID_NOME;

-- CRIAÇÃO PROCEDURE SELECT
CREATE PROCEDURE `SP_CADASTRO_CLIENTES_SELECT_ID_NOME`()
BEGIN
	SELECT ID, NOME
    FROM CADASTRO_CLIENTES
    ORDER BY NOME;
END

-- CHAMADA PROCEDURE_SELECT
CALL SP_CADASTRO_CLIENTES_SELECT_ID_NOME;

-- CRIAÇÃO PROCEDURE IF THEN ELSE
CREATE PROCEDURE `SP_NOVO_VELHO_CADASTRO_CLIENTES` (
p_CPF VARCHAR(11))

BEGIN
	DECLARE vResultado VARCHAR(20);
    DECLARE vDataNascimento DATE;
    SELECT DATA_NASCIMENTO INTO vDatanascimento 
    FROM cadastro_clientes WHERE CPF = p_CPF;
    
    IF vDatanascimento < '20000101' THEN
		SET vResultado = 'CLIENTE VELHO';
	ELSE
		SET vResultado = 'CLIENTE NOVO';
	END IF;
	SELECT vResultado;
END

-- CHAMADA PROCEDURE IF_THEN_ELSE


-- VISUALIZAR TABELAS
SELECT * FROM PRODUTOS;
SELECT * FROM VENDEDORES;
SELECT * FROM CADASTRO_CLIENTES;


COMMIT;


Mensagem 102, Nível 15, Estado 1, Linha 154
Incorrect syntax near '`'.
Mensagem 155, Nível 15, Estado 2, Linha 158
'VARCHAR' is not a recognized CURSOR option.
Mensagem 155, Nível 15, Estado 2, Linha 159
'DATE' is not a recognized CURSOR option.
Mensagem 156, Nível 15, Estado 1, Linha 163
Incorrect syntax near the keyword 'THEN'.
Mensagem 102, Nível 15, Estado 1, Linha 169
Incorrect syntax near 'END'.